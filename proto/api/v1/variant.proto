syntax = "proto3";
package api.v1;

import "google/protobuf/struct.proto";

service VariantService {
  rpc CreateVariant(CreateVariantRequest) returns (CreateVariantResponse) {}
  rpc UpdateVariant(UpdateVariantRequest) returns (UpdateVariantResponse) {}
  rpc GetVariant(GetVariantRequest) returns (GetVariantResponse) {}
  rpc ListVariants(ListVariantsRequest) returns (ListVariantsResponse) {}
}

message CreateVariantRequest {
  string route_id = 1;
  string name = 2;
  optional string short_name = 3;
  optional string description = 4;
  optional float distance = 5;
  int32 direction = 6;
  optional int32 duration = 7;
  google.protobuf.Struct attributes = 8;
}

message CreateVariantResponse {
  Variant variant = 1;
}

message UpdateVariantRequest {
  string id = 1;
  optional string route_id = 2;
  optional string name = 3;
  optional string short_name = 4;
  optional string description = 5;
  optional float distance = 6;
  optional int32 direction = 7;
  optional int32 duration = 8;
  optional google.protobuf.Struct attributes = 9;
}

message UpdateVariantResponse {
  Variant variant = 1;
}

message GetVariantRequest {
  string id = 1;
}

message GetVariantResponse {
  Variant variant = 1;
}

message ListVariantsRequest {
  string filter = 5;
  string order_by = 6;

  int32 page_size = 10;
  string page_token = 11;
}

message ListVariantsResponse {
  repeated Variant variants = 1;
  string next_page_token = 2;
}

message Variant {
  string id = 1;
  string route_id = 2;
  string name = 3;
  optional string short_name = 4;
  optional string description = 5;
  optional float distance = 6;
  int32 direction = 7;
  optional int32 duration = 8;
  google.protobuf.Struct attributes = 9;
}
